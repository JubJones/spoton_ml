# Phase 1 Detection Analysis Configuration
# Per-scenario/camera analysis with trained FasterRCNN model

# --- Model Configuration ---
local_model_path: "checkpoints/7af7b38617994e41adbd761df223cf93/ckpt_best_eval_map_50.pth"

model:
  type: "fasterrcnn"
  backbone_weights: "FasterRCNN_ResNet50_FPN_Weights.DEFAULT"
  num_classes: 2 # person + background
  trainable_backbone_layers: 3

# --- MLflow Configuration ---
mlflow:
  experiment_name: "Phase 1 Detection Analysis"

# --- Environment Configuration ---
environment:
  device: "cpu"  # FasterRCNN compatibility
  seed: 42

# --- Data Configuration ---
data:
  # Update base_path to point to your MTMMC dataset
  base_path: "D:/MTMMC"
  
  # Include all available scenes for comprehensive analysis
  scenes_to_include:
    - scene_id: "s10"
      camera_ids: ["c09", "c12", "c13", "c16"]
    - scene_id: "s47"
      camera_ids: ["c01", "c02", "c03", "c05"]
  
  # Analysis on full validation set
  use_data_subset: false
  data_subset_fraction: 1.0
  
  # Validation split
  val_split_ratio: 0.2
  num_workers: 2

# --- Phase 1 Analysis Configuration ---
analysis:
  # Output directory
  output_dir: "outputs/phase1_detection_analysis"
  
  # Detection thresholds
  iou_threshold: 0.5
  confidence_threshold: 0.5
  
  # Failure collection strategy
  collect_one_per_person: true
  
  # Visualization settings
  colors:
    ground_truth: [255, 0, 0]  # RED for ground truth
    detected: [0, 0, 255]      # BLUE for detected
    
  # Analysis parameters
  frame_sample_percent: 5.0  # Sample frames for analysis
  
  # Reporting
  generate_html_report: true
  generate_performance_matrix: true
  generate_failure_visualizations: true
  
  # Environmental analysis
  analyze_lighting_conditions: true
  analyze_crowd_density: true
  analyze_occlusion_levels: true