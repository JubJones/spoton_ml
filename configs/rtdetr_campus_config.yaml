# RT-DETR Campus Environment - Simplified Configuration  
# Just change data path, epochs, and model size - everything else uses smart defaults

mlflow:
  experiment_name: "RT-DETR Campus Training"

environment:
  device: "auto"
  seed: 42
  type: "campus"

data:
  base_path: "D:/MTMMC"  # UPDATE THIS: Point to your MTMMC dataset
  
  # Campus scenes and cameras
  scenes_to_include:
    # Start with single scene for progressive training
    - scene_id: "s47"
      camera_ids: ["c01", "c02", "c03", "c05"]
    
    # Uncomment additional scenes for multi-scene training:
    # - scene_id: "s35"
    #   camera_ids: ["c01", "c02", "c03", "c05"]
    # - scene_id: "s36"
    #   camera_ids: ["c01", "c02", "c03", "c05"]
    # - scene_id: "s38"
    #   camera_ids: ["c01", "c02", "c03", "c05"]
    # - scene_id: "s39"
    #   camera_ids: ["c01", "c02", "c03", "c05"]
    # - scene_id: "s42"
    #   camera_ids: ["c01", "c02", "c03", "c05"]
  
  # For testing stability - set to false for full dataset
  use_data_subset: true
  data_subset_fraction: 1

models_to_train:
  - model:
      type: "rtdetr"
      name_tag: "RTDETR_Campus_Simple"
      model_size: "rtdetr-l.pt"  # OPTIONS: rtdetr-l.pt, rtdetr-x.pt
      # pretrained_weights: "/path/to/your/checkpoints/rtdetr_campus/weights/best.pt"  # Mock path for incremental fine-tune
      
    training:
      # CORE PARAMETERS - Only change these
      epochs: 80              # Increase total epochs so the extended run adds 30 more
      batch_size: 4
      imgsz: 640
      
      # STABILITY SETTINGS - Keep these for reliable training
      lr0: 0.0001          # Fixed learning rate (prevents NaN losses)
      deterministic: false  # Avoids CUDA conflicts
      amp: false           # Prevents numerical instability
      
      # SIMPLE SETTINGS - Use defaults for everything else
      project: "checkpoints"
      name: "rtdetr_campus"
      exist_ok: true
      single_cls: true     # Person detection only
      fine_tune_lr: 0.00005  # Lower LR when resuming from fine-tuned checkpoint

run_name: "RT-DETR Campus Simple Training"
